<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Target Process poker game</title>
    <link rel="stylesheet" href="../assets/app.css" media="screen" />
</head>
<body role="application">
    <script type="text/x-handlebars">
        <div>
            <!--
            <nav>
                {{#linkTo "index"}}Index{{/linkTo}}
                {{#linkTo "app.new"}}New app{{/linkTo}}
            </nav>

            <hr />
            -->
            {{outlet}}
        </div>
    </script>

    <script type="text/x-handlebars"  data-template-name="index">
        <h1>{{title}}</h1>
    </script>

    <script type="text/x-handlebars"  data-template-name="app">
        {{outlet}}
    </script>

    <script type="text/x-handlebars"  data-template-name="app/new">
        <div class="container">
            <form class="form-small">
                {{#if loading}}
                <div class="loading"></div>
                <div class="progress progress-striped active">
                    <div class="bar" style="width: 20%;"></div>
                </div>
                {{else}}
                <div class="progress progress-striped">
                    <div class="bar" style="width: 20%;"></div>
                </div>
                {{/if}}
                <h3 class="form-small-heading">
                    Target Process poker game
                    <button class="btn btn-small pull-right" type="button" data-toggle="button" onclick="$(this).parents('form').find('.help').toggle();" data-loading-text="Loading...">Help me <i class="icon-user"></i></button>
                </h3>

                {{#view Ember.RadioButtonGroup name="role" selectedValueBinding=role}}{{/view}}

                <label class="radio">
                    {{view Ember.RadioButton groupBinding="Ember.RadioButtonGroup_role" value="developer"}}
                    Developer
                </label>
                <div class="well">
                    <p class="text-info">You do not need privileges for Target Process in order to play the poker game.</p>
                </div>

                <label class="radio">
                    {{view Ember.RadioButton groupBinding="Ember.RadioButtonGroup_role" value="moderator"}}
                    Moderator
                </label>

                <div class="well">
                    <p>Please specify the Target Process application URL:</p>
                    {{view Ember.TextField class="input-block-level" placeholder="Target Process URL" valueBinding=url disabledBinding=isNotModerator}}
                    <p class="text-info">You have to be logged in to Target Process before you can use this Hangout application.</p>
                    {{#if lastLoadingError}}
                    <div class="alert alert-block alert-error fade in">
                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                        <p class="text-error">The following error occurred while trying to use Target Process REST API: <b>{{lastLoadingError}}</b>. Please double check that you have entered the correct URL of the Target Process application and that you are logged in on it.</p>
                    </div>
                    {{/if}}
                </div>

                <button class="btn btn-large btn-primary" type="submit" {{action create href=true}} data-loading-text="Loading...">Start</button>
                <div class="help well">
                    <p>Hello world!</p>
                </div>

            </form>

        </div> <!-- /container -->
    </script>

    <script type="text/x-handlebars"  data-template-name="projects">
        <div class="container">
            <form class="form-small">
                {{#if isLoaded}}
                <div class="progress progress-striped">
                    <div class="bar" style="width: 40%;"></div>
                </div>
                {{else}}
                <div class="loading"></div>
                <div class="progress progress-striped active">
                    <div class="bar" style="width: 40%;"></div>
                </div>
                {{/if}}

                <h3>
                    Select project <button class="btn btn-small pull-right" type="button" data-toggle="button" onclick="$(this).parents('form').find('.help').toggle();" data-loading-text="Loading...">Help me <i class="icon-user"></i></button>
                </h3>
                <!--
                <div style="margin: 0 0 15px;">
                    <div class="btn-group btn-group-vertical" data-toggle="buttons-radio">
                        <button class="btn full-width">Left</button>
                        <button class="btn full-width">Middle</button>
                        <button class="btn full-width">Right</button>
                    </div>
                </div>
                -->

                {{#view Ember.RadioButtonGroup name="project" selectedValueBinding=TPPoker.Application.state.project}}{{/view}}

                <div class="el">
                    {{#if isLoaded}}
                    {{else}}
                    <p class="text">Loading...</p>
                    {{/if}}

                    {{#each model.projects}}
                    <label class="radio">
                        {{view Ember.RadioButton groupBinding="Ember.RadioButtonGroup_project" valueBinding=this}}
                        [{{id}}] {{name}}
                    </label>
                    {{/each}}
                </div>

                <button class="btn btn-large btn-primary" type="submit" {{action create href=true}} {{bindAttr disabled=isNotLoaded}} data-loading-text="Loading...">Select</button>

                <div class="well">
                    <p>
                        Selected project: {{TPPoker.Application.state.project.name}}
                    </p>
                </div>
                <div class="help well">
                    <p class="text-info">At the moment API supports following filtering operators:</p>

                    <table class="table table-hover table-condensed">
                        <thead>
                        <tr>
                            <th>Operator</th>
                            <th>Sample</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>Equality</td>
                            <td>Name <b>eq</b> 'My Name'</td>
                        </tr>
                        <tr>
                            <td>Not equality</td>
                            <td>Name <b>ne</b> 'My Name'</td>
                        </tr>
                        <tr>
                            <td>Greater than</td>
                            <td>Id <b>gt</b> 5</td>
                        </tr>
                        <tr>
                            <td>Greater than or equal</td>
                            <td>Project.Id <b>gte</b> 5</td>
                        </tr>
                        <tr>
                            <td>Less than</td>
                            <td>CreateDate <b>lt</b> '2011-10-01'</td>
                        </tr>
                        <tr>
                            <td>Less than or equal</td>
                            <td>TimeSpent <b>lte</b> 5.0</td>
                        </tr>
                        <tr>
                            <td>In <i>list</i></td>
                            <td>Id <b>in</b> (155,156)</td>
                        </tr>
                        <tr>
                            <td>Contains</td>
                            <td>Name <b>contains</b> 'rest'</td>
                        </tr>
                        <tr>
                            <td>Is null</td>
                            <td>Release <b>is</b> null</td>
                        </tr>
                        <tr>
                            <td>Is not null</td>
                            <td>Description <b>is not</b> null</td>
                        </tr>
                        </tbody>
                    </table>
                </div>

            </form>
        </div>
    </script>

    <script src="../assets/loader.js"></script>
    <script src="../assets/app.js"></script>
    <script>
        loader.require('ember-tppoker/main');
    </script>
</body>
</html>
